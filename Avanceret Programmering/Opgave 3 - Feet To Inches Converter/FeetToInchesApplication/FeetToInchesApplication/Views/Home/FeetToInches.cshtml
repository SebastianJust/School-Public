@{
    ViewData["Title"] = "Home Page";
}
@model FeetInchesRequestModel
<!-- Call to Action -->
<section class="features-icons bg-light text-center">
    <div class="overlay"></div>
    <div class="container">
        <div class="row">
            <div class="col-xl-9 mx-auto">
                <h2 class="mb-4">From Feet to Inches</h2>
                <h5>In 1959, the international yard and pound agreement (between the states of the United States and the British Millennium Community) defined a feet exactly 12 inches.</h5>
            </div>
            <div class="col-md-10 col-lg-8 col-xl-7 mx-auto">
                <form name="feetForm" id="feetForm" action="Post" class="lead">
                    <div class="form-row">
                        <div class="col-12 col-md-9 mb-2 mb-md-0">
                            <input type="number" class="form-control form-control-lg" asp-for="Feet" placeholder="Enter feet...">
                            <span asp-validation-for="Feet" class="text-danger"></span>
                            <h6 id="resultCompleted" style="color:green"></h6>
                            <h6 id="resultErr" style="color:red"></h6>
                        </div>

                        <div class="col-12 col-md-3">
                            <button id="calculateFeet" class="btn btn-block btn-lg btn-primary">Calculate</button>    
                         
                        </div>


                    </div>
                </form>

            </div>
        </div>
    </div>
</section>

<script>
    $(document).ready(function () {
        $("#calculateFeet").click(function (e) {
            document.getElementById("calculateFeet").innerHTML = 'Calculating..';
            e.preventDefault();
            var settings = {
                url: '/Api/feetToInches',
                type: 'post',
                "content-Type": "application/json",
                data: $('#feetForm').serialize(),
            }

            $.ajax(settings).done(function (resp) {
                document.getElementById("calculateFeet").innerHTML = "Calculate";
                console.log(resp);
                document.getElementById("resultCompleted").innerHTML = resp.text;
                document.getElementById("resultErr").innerHTML = "";


            }).fail(function (err) {
                document.getElementById("calculateFeet").innerHTML = "Try one more time";

                console.log("Failed...");
                console.log(err);
                document.getElementById("resultErr").innerHTML = err.responseText;
                document.getElementById("resultCompleted").innerHTML = "";

            });
        });

    });
</script>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

